<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" charset="UTF-8"/>
	<title>首页</title>
	<link rel="stylesheet" type="text/css" href="static/p_style.css">
	<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
	<div class="maincontent">
		<div style="overflow: hidden;padding-top: 10px">
			<button style="border: 1px solid;float: right;border-radius: 5px;line-height: 2rem;background-color: white;"
			onclick="window.location.href='pc_login'">我已有账号，去登录</button>
		</div>
		<div class="p_header" style="padding-top: 15px;text-align: center;margin: auto;">新用户注册</div>
		<form id="submitForm">
			<div style="padding: 10px 0">
				<table style="line-height: 2rem;margin:auto;width: 90%" id="register_Table">
					<tr>
						<td><label for="username">用户名：</label></td>
						<td><input type="text" name="username" id="username" placeholder="用户名/手机/QQ/邮箱" required="required" /></td>
					</tr>
					<tr>
						<td><label for="password">密码：</label></td>
						<td><input type="password" name="password" id="password" placeholder="6-20位" required="required"/></td>
					</tr>
					<tr>
						<td style="width: 6rem"><label for="password2">确认密码：</label></td>
						<td><input type="password" name="password2" id="password2" placeholder="6-20位，与上面一致" required="required"/></td>
					</tr>
					<tr>
						<td><label for="introduce">推荐人：</label></td>
						<td><input type="text" name="introduce" id="introduce" placeholder="{{inviter}}" disabled /></td>
					</tr>
					<tr>
						<td colspan="2"><input type="checkbox" name="agree" id="agree" required/>
						<label for="agree" style="font-size: 14px">我同意微灵果用户协议</label>
						<a href="/" class="minlink" style="float: right;">点击查看协议</a>
					</td>
					</tr>
				</table>
			</div>
			<div class="check_alert"></div>

			<div style="text-align: center;margin: auto;">
				<input type="submit" name="submit" style="border:1px solid;border-radius: 5px;background-color: #0099FF;color:white;line-height: 2rem;width: 40%" value="确认注册"></button>
			</div>
		</form>
	</div>
</body>
<script type="text/javascript">
	$('#submitForm').submit(function(){
		$('.check_alert').hide()

		var re_uname=$('#username').val()
		var re_passwd=$('#password').val()
		var re_passwd2=$('#password2').val()

		if(re_passwd===re_passwd2){
			var myUrl="./p_register?userid="+re_uname+"&password="+re_passwd+"&inviter={{inviter}}"

			$.get({
				url:myUrl,
				type:'get',
				dataType:'json',
				success:function(data,status){
					console.log(data)
				}
			})


		}else{
			$('.check_alert').text("* 两次输入密码不一致").show()
		}

		return false
	});
</script>
</html>